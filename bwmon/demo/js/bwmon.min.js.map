window.VERSION="2.3.1";
/*
	bwmon v2.3.1
	(C) 2010 - 2015 VREM Software Development
	https://github.com/VREMSoftwareDevelopment/bwmon
	License: Apache-2.0
*/
{"version":3,"sources":["bwmon.min.js"],"names":["angular","module","config","$routeProvider","otherwise","redirectTo","controller","$interval","$scope","rootController","this","updateClock","clock","Date","clockOn","currentDate","version","window","VERSION","$on","e","cancel","run","$templateCache","put","directive","chartService","restrict","replace","require","template","scope","bindToController","chartType","chartTypes","getChartTypes","extend","controllerAs","filter","input","start","slice","month","moment","format","time","value","Math","round","dataService","year","ctrl","updateMonth","months","getMonths","$watch","years","getYears","$location","join","isActive","viewLocation","path","routes","href","name","factory","_getYearLabel","data","result","id","_getMonthLabel","_getUserLabel","IP","_getUserTooltip","user","_getChartTypes","_getChartOptions","label","tooltip","series","y","color","type","axes","x","labelFunction","formatter","getYearLabel","getMonthLabel","getUserLabel","getUserTooltip","getChartOptions","_data","bwmonData","_sort","a","b","_sum","entries","days","download","upload","total","forEach","entry","average","toFixed","_getMonths","_","where","uniq","item","pluck","_getYears","_getUsageByYear","dayOfYear","usage","_getUsageByUser","daysInMonth","filterLowerCase","toLowerCase","indexOf","MAC","each","index","percent","_getUsageByMonth","map","_getChartData","reverse","chartData","usageData","key","init","sort","getUsageByUser","getUsageByMonth","getUsageByYear","when","templateUrl","usageByMonthCtrl","selected","predicate","chartOptions","usageByUserCtrl","reset","pageSize","usageByYearCtrl"],"mappings":"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","file":"bwmon.min.js","sourcesContent":["/*\r\n *    Copyright (C) 2010 - 2015 VREM Software Development <VREMSoftwareDevelopment@gmail.com>\r\n *\r\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n *    you may not use this file except in compliance with the License.\r\n *    You may obtain a copy of the License at\r\n *\r\n *        http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *    Unless required by applicable law or agreed to in writing, software\r\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *    See the License for the specific language governing permissions and\r\n *    limitations under the License.\r\n */\r\nangular.module('BWMonApp', [\r\n\t'ngRoute',\r\n\t'ui.bootstrap',\r\n\t'angularUtils.directives.dirPagination',\r\n\t'n3-line-chart',\r\n\t'BWMonApp.Filters',\r\n\t'BWMonApp.Navigation',\r\n\t'BWMonApp.UsageByUser',\r\n\t'BWMonApp.UsageByMonth',\r\n\t'BWMonApp.UsageByYear',\r\n\t'BWMonApp.SelectYear',\r\n\t'BWMonApp.SelectMonth',\r\n\t'BWMonApp.ChartType',\r\n\t'BWMonApp.ChartService',\r\n\t'BWMonApp.DataService'\r\n])\r\n.config(function($routeProvider) {\r\n\t$routeProvider.otherwise({redirectTo: '/UsageByUser'});\r\n})\r\n.controller('rootController', function($interval, $scope) {\r\n\tvar rootController = this,\r\n\t\tupdateClock = function() {\r\n\t\t\trootController.clock = new Date();\r\n\t\t},\r\n\t\tclockOn = $interval(updateClock, 1000);\r\n\r\n\tupdateClock();\r\n\r\n\trootController.currentDate = rootController.clock;\r\n\trootController.version = window.VERSION || 'SNAPSHOT';\r\n\r\n\t$scope.$on('$destroy', function(e) {\r\n\t\t$interval.cancel(clockOn);\r\n\t});\r\n});\r\n;angular.module(\"BWMonApp\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"index.tpl.html\",\"<!doctype html>\\r\\n<html lang=\\\"en\\\" ng-app=\\\"BWMonApp\\\" ng-controller=\\\"rootController as rootCtrl\\\">\\r\\n<head>\\r\\n\t<meta charset=\\\"utf-8\\\">\\r\\n\t<meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1\\\">\\r\\n\t<title>Bandwidth Monitor Usage</title>\\r\\n<!-- @ifdef PRODUCTION -->\\r\\n\t<link rel=\\\"stylesheet\\\" href=\\\"css/bootstrap.min.css\\\">\\r\\n\t<link rel=\\\"stylesheet\\\" href=\\\"css/bwmon.min.css\\\">\\r\\n<!-- @endif -->\\r\\n<!-- @ifdef DEVELOPMENT -->\\r\\n\t<link rel=\\\"stylesheet\\\" href=\\\"../bower_components/bootstrap/dist/css/bootstrap.min.css\\\">\\r\\n\t<link rel=\\\"stylesheet\\\" href=\\\"css/app.css\\\">\\r\\n<!-- @endif -->\\r\\n</head>\\r\\n<body class=\\\"container\\\">\\r\\n\t<h2>\\r\\n\t\t<span class=\\\"pull-left\\\">Bandwidth Monitor Usage</span>\\r\\n\t\t<small class=\\\"pull-right\\\">{{rootCtrl.clock  | date: \\'medium\\'}}</small>\\r\\n\t\t<span class=\\\"clearfix\\\"></span>\\r\\n\t</h2>\\r\\n\t<navigation></navigation>\\r\\n\t<div class=\\\"ng-view-min-height\\\">\\r\\n\t\t<div ng-view></div>\\r\\n\t</div>\\r\\n\t<h5>\\r\\n\t\t<b>All usage information is in gigabytes</b>\\r\\n\t</h5>\\r\\n\t<h5>\\r\\n\t\t<span class=\\\"pull-left\\\">This page was generated on {{::rootCtrl.currentDate | date: \\'medium\\'}}</span>\\r\\n\t\t<span class=\\\"pull-right\\\">Version {{::rootCtrl.version}}</span>\\r\\n\t\t<span class=\\\"clearfix\\\"></span>\\r\\n\t</h5>\\r\\n\t<script src=\\\"bwmonUsage.js\\\"></script>\\r\\n<!-- @ifdef PRODUCTION -->\\r\\n\t<script src=\\\"js/libs.js\\\"></script>\\r\\n\t<script src=\\\"js/bwmon.min.js\\\"></script>\\r\\n<!-- @endif -->\\r\\n<!-- @ifdef DEVELOPMENT -->\\r\\n\t<script src=\\\"../bower_components/angular/angular.min.js\\\"></script>\\r\\n\t<script src=\\\"../bower_components/angular-route/angular-route.min.js\\\"></script>\\r\\n\t<script src=\\\"../bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js\\\"></script>\\r\\n\t<script src=\\\"../bower_components/angularUtils-pagination/dirPagination.js\\\"></script>\\r\\n\t<script src=\\\"../bower_components/underscore/underscore-min.js\\\"></script>\\r\\n\t<script src=\\\"../bower_components/momentjs/min/moment.min.js\\\"></script>\\r\\n\t<script src=\\\"../bower_components/d3/d3.min.js\\\"></script>\\r\\n\t<script src=\\\"../bower_components/n3-line-chart/build/line-chart.min.js\\\"></script>\\r\\n\t<script src=\\\"app.js\\\"></script>\\r\\n\t<script src=\\\"navigation/navigation.js\\\"></script>\\r\\n\t<script src=\\\"services/dataService.js\\\"></script>\\r\\n\t<script src=\\\"services/chartService.js\\\"></script>\\r\\n\t<script src=\\\"usagebyuser/usageByUser.js\\\"></script>\\r\\n\t<script src=\\\"usagebymonth/usageByMonth.js\\\"></script>\\r\\n\t<script src=\\\"usagebyyear/usageByYear.js\\\"></script>\\r\\n\t<script src=\\\"common/filters.js\\\"></script>\\r\\n\t<script src=\\\"common/selectYear.js\\\"></script>\\r\\n\t<script src=\\\"common/selectMonth.js\\\"></script>\\r\\n\t<script src=\\\"common/chartType.js\\\"></script>\\r\\n<!-- @endif -->\\r\\n</body>\\r\\n</html>\");\n$templateCache.put(\"usagebymonth/usageByMonth.tpl.html\",\"<uib-tabset justified=\\\"true\\\">\\r\\n\t<uib-tab id=\\\"Data\\\" heading=\\\"Data\\\">\\r\\n\t\t<month-form></month-form>\\r\\n\t\t<month-table></month-table>\\r\\n\t</uib-tab>\\r\\n\t<uib-tab id=\\\"Chart\\\" heading=\\\"Chart\\\">\\r\\n\t\t<month-chart-form></month-chart-form>\\r\\n\t\t<month-chart></month-chart>\\r\\n\t</uib-tab>\\r\\n</uib-tabset>\");\n$templateCache.put(\"usagebyuser/usageByUser.tpl.html\",\"<uib-tabset justified=\\\"true\\\">\\r\\n\t<uib-tab id=\\\"Data\\\" heading=\\\"Data\\\">\\r\\n\t\t<user-form></user-form>\\r\\n\t\t<user-table></user-table>\\r\\n\t</uib-tab>\\r\\n\t<uib-tab id=\\\"Chart\\\" heading=\\\"Chart\\\">\\r\\n\t\t<user-chart-form></user-chart-form>\\r\\n\t\t<user-chart></user-chart>\\r\\n\t</uib-tab>\\r\\n</uib-tabset>\");\n$templateCache.put(\"usagebyyear/usageByYear.tpl.html\",\"<uib-tabset justified=\\\"true\\\">\\r\\n\t<uib-tab id=\\\"Data\\\" heading=\\\"Data\\\">\\r\\n\t\t<year-table></year-table>\\r\\n\t</uib-tab>\\r\\n\t<uib-tab id=\\\"Chart\\\" heading=\\\"Chart\\\">\\r\\n\t\t<year-chart-form></year-chart-form>\\r\\n\t\t<year-chart></year-chart>\\r\\n\t</uib-tab>\\r\\n</uib-tabset>\");}]);;/*\r\n *    Copyright (C) 2010 - 2015 VREM Software Development <VREMSoftwareDevelopment@gmail.com>\r\n *\r\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n *    you may not use this file except in compliance with the License.\r\n *    You may obtain a copy of the License at\r\n *\r\n *        http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *    Unless required by applicable law or agreed to in writing, software\r\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *    See the License for the specific language governing permissions and\r\n *    limitations under the License.\r\n */\r\nangular.module('BWMonApp.ChartType', [])\r\n.directive('chartType', function(chartService) {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\trequire: 'ngModel',\r\n\t\ttemplate: '<select ng-options=\"choiceChartType for choiceChartType in ::chartTypeCtrl.chartTypes\"></select>',\r\n\t\tscope: {},\r\n\t\tbindToController: {\r\n\t\t\tchartType: '=ngModel'\r\n\t\t},\r\n\t\tcontroller: function() {\r\n\t\t\tvar chartTypes = chartService.getChartTypes();\r\n\t\t\tangular.extend(this, {\r\n\t\t\t\tchartTypes: chartTypes,\r\n\t\t\t\tchartType: chartTypes[0]\r\n\t\t\t});\r\n\t\t},\r\n\t\tcontrollerAs: 'chartTypeCtrl'\r\n\t};\r\n});\r\n;/*\r\n *    Copyright (C) 2010 - 2015 VREM Software Development <VREMSoftwareDevelopment@gmail.com>\r\n *\r\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n *    you may not use this file except in compliance with the License.\r\n *    You may obtain a copy of the License at\r\n *\r\n *        http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *    Unless required by applicable law or agreed to in writing, software\r\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *    See the License for the specific language governing permissions and\r\n *    limitations under the License.\r\n */\r\nangular.module('BWMonApp.Filters', [])\r\n.filter('startFrom', function() {\r\n\treturn function(input, start) {\r\n\t\treturn input.slice(start);\r\n\t};\r\n})\r\n.filter('toMonth', function() {\r\n\treturn function(month) {\r\n\t\treturn moment([2012, month]).format(\"MMMM\");\r\n\t};\r\n})\r\n.filter('timeToDate', function() {\r\n\treturn function(time) {\r\n\t\treturn new Date(time*1000);\r\n\t};\r\n})\r\n.filter('usageInGBytes', function() {\r\n\treturn function(value) {\r\n\t\treturn Math.round(value/1000)/1000;\r\n\t};\r\n});\r\n;/*\r\n *    Copyright (C) 2010 - 2015 VREM Software Development <VREMSoftwareDevelopment@gmail.com>\r\n *\r\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n *    you may not use this file except in compliance with the License.\r\n *    You may obtain a copy of the License at\r\n *\r\n *        http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *    Unless required by applicable law or agreed to in writing, software\r\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *    See the License for the specific language governing permissions and\r\n *    limitations under the License.\r\n */\r\nangular.module('BWMonApp.SelectMonth', [])\r\n.directive('selectMonth', function(dataService) {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\trequire: ['ngModel', 'year'],\r\n\t\ttemplate: '<select ng-options=\"choiceMonth for choiceMonth in selectMonthCtrl.months\"></select>',\r\n\t\tscope: {},\r\n\t\tbindToController: {\r\n\t\t\tmonth: '=ngModel',\r\n\t\t\tyear: '=year'\r\n\t\t},\r\n\t\tcontroller: function($scope) {\r\n\t\t\tvar ctrl = this;\r\n\t\t\tvar updateMonth = function() {\r\n\t\t\t\tvar months = dataService.getMonths(ctrl.year);\r\n\t\t\t\tctrl.months = months;\r\n\t\t\t\tctrl.month = months[0];\r\n\t\t\t};\r\n\r\n\t\t\tupdateMonth();\r\n\t\t\t$scope.$watch('selectMonthCtrl.year', function() {\r\n\t\t\t\tupdateMonth();\r\n\t\t\t}, true);\r\n\t\t},\r\n\t\tcontrollerAs: 'selectMonthCtrl'\r\n\t};\r\n});\r\n\r\n;/*\r\n *    Copyright (C) 2010 - 2015 VREM Software Development <VREMSoftwareDevelopment@gmail.com>\r\n *\r\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n *    you may not use this file except in compliance with the License.\r\n *    You may obtain a copy of the License at\r\n *\r\n *        http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *    Unless required by applicable law or agreed to in writing, software\r\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *    See the License for the specific language governing permissions and\r\n *    limitations under the License.\r\n */\r\nangular.module('BWMonApp.SelectYear', [])\r\n.directive('selectYear', function(dataService) {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\trequire: 'ngModel',\r\n\t\ttemplate: '<select ng-options=\"choiceYear for choiceYear in ::selectYearCtrl.years\"></select>',\r\n\t\tscope: {},\r\n\t\tbindToController: {\r\n\t\t\tyear: '=ngModel'\r\n\t\t},\r\n\t\tcontroller: function() {\r\n\t\t\tvar years = dataService.getYears();\r\n\t\t\tangular.extend(this, {\r\n\t\t\t\tyears: years,\r\n\t\t\t\tyear: years[0]\r\n\t\t\t});\r\n\t\t},\r\n\t\tcontrollerAs: 'selectYearCtrl'\r\n\t};\r\n});\r\n;/*\r\n *    Copyright (C) 2010 - 2015 VREM Software Development <VREMSoftwareDevelopment@gmail.com>\r\n *\r\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n *    you may not use this file except in compliance with the License.\r\n *    You may obtain a copy of the License at\r\n *\r\n *        http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *    Unless required by applicable law or agreed to in writing, software\r\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *    See the License for the specific language governing permissions and\r\n *    limitations under the License.\r\n */\r\nangular.module('BWMonApp.Navigation', [])\r\n.directive('navigation', function($location) {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\ttemplate: [\r\n\t\t\t\t'<div class=\"navbar navbar-default\">',\r\n\t\t\t\t\t'<ul class=\"nav navbar-nav\">',\r\n\t\t\t\t\t\t'<li ng-repeat=\"route in ::navigationCtrl.routes\" ng-class=\"{active: navigationCtrl.isActive(\\'{{::route.href}}\\')}\" >',\r\n\t\t\t\t\t\t\t'<a href=\"#{{::route.href}}\">{{::route.name}}</a>',\r\n\t\t\t\t\t\t'</li>',\r\n\t\t\t\t\t'</ul>',\r\n\t\t\t\t'</div>'\r\n\t\t\t].join(''),\r\n\t\tscope: {},\r\n\t\tcontroller: function($scope) {\r\n\t\t\tangular.extend(this, {\r\n\t\t\t\tisActive: function (viewLocation) {\r\n\t\t\t\t\treturn viewLocation === $location.path();\r\n\t\t\t\t},\r\n\t\t\t\troutes: [{\r\n\t\t\t\t\thref: '/UsageByUser',\r\n\t\t\t\t\tname: 'Usage By User'\r\n\t\t\t\t}, {\r\n\t\t\t\t\thref: '/UsageByMonth',\r\n\t\t\t\t\tname: 'Usage By Month'\r\n\t\t\t\t}, {\r\n\t\t\t\t\thref: '/UsageByYear',\r\n\t\t\t\t\tname: 'Usage By Year'\r\n\t\t\t\t}]\r\n\t\t\t});\r\n\t\t},\r\n\t\tcontrollerAs: 'navigationCtrl'\r\n\t};\r\n});\r\n;/*\r\n *    Copyright (C) 2010 - 2015 VREM Software Development <VREMSoftwareDevelopment@gmail.com>\r\n *\r\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n *    you may not use this file except in compliance with the License.\r\n *    You may obtain a copy of the License at\r\n *\r\n *        http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *    Unless required by applicable law or agreed to in writing, software\r\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *    See the License for the specific language governing permissions and\r\n *    limitations under the License.\r\n */\r\nangular.module('BWMonApp.ChartService', [])\r\n.factory('chartService', function() {\r\n\tvar _getYearLabel = function(value, data) {\r\n\t\t\tvar result = '';\r\n\t\t\tif (value % 1 === 0 && typeof data[value] !== 'undefined' && data[value] !== null) {\r\n\t\t\t\tresult = data[value].id;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t_getMonthLabel = function(value) {\r\n\t\t\tvar result = '';\r\n\t\t\tif (value % 1 === 0 && value >= 0 && value <= 11) {\r\n\t\t\t\tresult = moment({month: value}).format(\"MMMM\");\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t_getUserLabel = function(value, data) {\r\n\t\t\tvar result = '';\r\n\t\t\tif (value % 1 === 0 && typeof data[value] !== 'undefined' && data[value] !== null) {\r\n\t\t\t\tresult = data[value].IP;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t_getUserTooltip = function(value, data) {\r\n\t\t\tvar result = '';\r\n\t\t\tif (value % 1 === 0 && typeof data[value] !== 'undefined' && data[value] !== null) {\r\n\t\t\t\tresult = data[value].user;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t_getChartTypes = function() {\r\n\t\t\treturn ['column', 'line', 'area'];\r\n\t\t},\r\n\t\t_getChartOptions = function(data, label, tooltip) {\r\n\t\t\treturn {\r\n\t\t\t\tseries: [{\r\n\t\t\t\t\ty: 'total',\r\n\t\t\t\t\tcolor: '#3366CC',\r\n\t\t\t\t\tlabel: 'GBytes',\r\n\t\t\t\t\ttype: _getChartTypes()[0]\r\n\t\t\t\t}],\r\n\t\t\t\taxes: {\r\n\t\t\t\t\tx: {\r\n\t\t\t\t\t\tlabelFunction: function(value) {\r\n\t\t\t\t\t\t\treturn label(value, data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\ttooltip: {\r\n\t\t\t\t\tformatter: function(x, y, series) {\r\n\t\t\t\t\t\treturn tooltip(x, data)  + ' : ' + y;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t};\r\n\r\n\treturn {\r\n\t\tgetYearLabel: _getYearLabel,\r\n\t\tgetMonthLabel: _getMonthLabel,\r\n\t\tgetUserLabel: _getUserLabel,\r\n\t\tgetUserTooltip: _getUserTooltip,\r\n\t\tgetChartTypes: _getChartTypes,\r\n\t\tgetChartOptions: _getChartOptions\r\n\t};\r\n});\r\n;/*\r\n *    Copyright (C) 2010 - 2015 VREM Software Development <VREMSoftwareDevelopment@gmail.com>\r\n *\r\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n *    you may not use this file except in compliance with the License.\r\n *    You may obtain a copy of the License at\r\n *\r\n *        http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *    Unless required by applicable law or agreed to in writing, software\r\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *    See the License for the specific language governing permissions and\r\n *    limitations under the License.\r\n */\r\nangular.module('BWMonApp.DataService', [])\r\n.factory('dataService', function() {\r\n\tvar _data = bwmonData(),\r\n\t\t_sort = function(a, b) {\r\n\t\t\tvar result = b.year - a.year;\r\n\t\t\tif (result === 0) {\r\n\t\t\t\tresult = b.month - a.month;\r\n\t\t\t\tif (result === 0) {\r\n\t\t\t\t\tresult = a.IP < b.IP ? -1 : a.IP > b.IP ? 1 : 0;\r\n\t\t\t\t\tif (result === 0) {\r\n\t\t\t\t\t\tresult = b.id - a.id;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t_sum = function(entries, days, id) {\r\n\t\t\tvar download = 0,\r\n\t\t\t\tupload = 0,\r\n\t\t\t\ttotal = 0;\r\n\r\n\t\t\tentries.forEach(function(entry) {\r\n\t\t\t\tdownload += entry.download;\r\n\t\t\t\tupload += entry.upload;\r\n\t\t\t\ttotal += entry.total;\r\n\t\t\t});\r\n\r\n\t\t\treturn {\r\n\t\t\t\tid: id,\r\n\t\t\t\tdownload: download,\r\n\t\t\t\tupload: upload,\r\n\t\t\t\ttotal: total,\r\n\t\t\t\taverage: +(total/days).toFixed(3),\r\n\t\t\t\tdays: days\r\n\t\t\t};\r\n\t\t},\r\n\t\t_getMonths = function(year) {\r\n\t\t\tvar result = _.where(_data, {year: year});\r\n\t\t\tresult = _.uniq(result, function(item){\r\n\t\t\t\treturn item.month;\r\n\t\t\t});\r\n\t\t\tresult = _.pluck(result, 'month');\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t_getYears = function() {\r\n\t\t\tvar result = _.uniq(_data, function(item){\r\n\t\t\t\treturn item.year;\r\n\t\t\t});\r\n\t\t\tresult = _.pluck(result, 'year');\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t_getUsageByYear = function(year) {\r\n\t\t\tvar days = moment([year, 11, 31]).dayOfYear(),\r\n\t\t\t\tusage = _.where(_data, {year: year});\r\n\r\n\t\t\treturn _sum(usage, days, year);\r\n\t\t},\r\n\t\t_getUsageByUser = function(year, month, filter) {\r\n\t\t\tvar usage = _.where(_data, {year: year, month: month}),\r\n\t\t\t\tdays = moment([year, month]).daysInMonth(),\r\n\t\t\t\ttotal = _sum(usage, days, month);\r\n\r\n\t\t\tif (filter) {\r\n\t\t\t\tusage = _.filter(usage, function(entry) {\r\n\t\t\t\t\tvar filterLowerCase = filter.toLowerCase();\r\n\t\t\t\t\treturn entry.IP.toLowerCase().indexOf(filterLowerCase) !== -1 ||\r\n\t\t\t\t\t\tentry.MAC.toLowerCase().indexOf(filterLowerCase) !== -1 ||\r\n\t\t\t\t\t\tentry.user.toLowerCase().indexOf(filterLowerCase) !== -1;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t_.each(usage, function(value, index) {\r\n\t\t\t\tvalue.percent = +(value.total * 100/total.total).toFixed(1);\r\n\t\t\t});\r\n\r\n\t\t\treturn {\r\n\t\t\t\tusage: usage,\r\n\t\t\t\ttotal: total\r\n\t\t\t};\r\n\t\t},\r\n\t\t_getUsageByMonth = function(year) {\r\n\t\t\tvar\tmonths = _getMonths(year),\r\n\t\t\t\tusage = _.map(months, function(entry) {\r\n\t\t\t\t\treturn _getUsageByUser(year, entry).total;\r\n\t\t\t\t}),\r\n\t\t\t\ttotal = _getUsageByYear(year);\r\n\r\n\t\t\t_.each(usage, function(value, index) {\r\n\t\t\t\tvalue.percent = +(value.total * 100/total.total).toFixed(1);\r\n\t\t\t});\r\n\t\t\treturn {\r\n\t\t\t\tusage: usage,\r\n\t\t\t\ttotal: total\r\n\t\t\t};\r\n\t\t},\r\n\t\t_getChartData = function(data, reverse) {\r\n\t\t\tvar chartData = [],\r\n\t\t\t\tusageData = data,\r\n\t\t\t\tround = function(value) {\r\n\t\t\t\t\treturn Math.round(value/1000)/1000;\r\n\t\t\t\t};\r\n\r\n\t\t\tif (reverse) {\r\n\t\t\t\tusageData = data.slice().reverse();\r\n\t\t\t}\r\n\t\t\tchartData = _.map(usageData, function(entry, key) {\r\n\t\t\t\tvar result = {\r\n\t\t\t\t\tx: key,\r\n\t\t\t\t\tid: entry.id,\r\n\t\t\t\t\ttotal: round(entry.total)\r\n\t\t\t\t};\r\n\t\t\t\tif (entry.IP) {result.IP = entry.IP;}\r\n\t\t\t\tif (entry.user) {result.user = entry.user;}\r\n\t\t\t\treturn result;\r\n\t\t\t});\r\n\t\t\treturn chartData;\r\n\t\t},\r\n\t\tinit = function() {\r\n\t\t\t_data.sort(_sort);\r\n\t\t};\r\n\r\n\tinit();\r\n\r\n\treturn {\r\n\t\tgetYears: _getYears,\r\n\t\tgetMonths: function(year) {\r\n\t\t\tvar result = _getMonths(year);\r\n\t\t\tresult = _.map(result, function(month) {\r\n\t\t\t\treturn moment([year, month]).format(\"MMMM\");\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tgetUsageByUser: function(year, month, filter) {\r\n\t\t\tvar result = _getUsageByUser(year, moment(year+'-'+month, \"YYYY-MMMM\").month(), filter);\r\n\t\t\treturn {\r\n\t\t\t\tdata: result,\r\n\t\t\t\tchartData: _getChartData(result.usage, false)\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetUsageByMonth: function(year) {\r\n\t\t\tvar result = _getUsageByMonth(year);\r\n\t\t\treturn {\r\n\t\t\t\tdata: result,\r\n\t\t\t\tchartData: _getChartData(result.usage, true)\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetUsageByYear: function() {\r\n\t\t\tvar result = _getYears();\r\n\t\t\tresult = _.map(result, function(entry) {\r\n\t\t\t\treturn _getUsageByYear(entry);\r\n\t\t\t});\r\n\t\t\treturn {\r\n\t\t\t\tdata: result,\r\n\t\t\t\tchartData: _getChartData(result, true)\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n});\r\n;/*\r\n *    Copyright (C) 2010 - 2015 VREM Software Development <VREMSoftwareDevelopment@gmail.com>\r\n *\r\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n *    you may not use this file except in compliance with the License.\r\n *    You may obtain a copy of the License at\r\n *\r\n *        http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *    Unless required by applicable law or agreed to in writing, software\r\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *    See the License for the specific language governing permissions and\r\n *    limitations under the License.\r\n */\r\nangular.module('BWMonApp.UsageByMonth', ['ngRoute'])\r\n.config(function($routeProvider) {\r\n\t$routeProvider.when('/UsageByMonth', {\r\n\t\ttemplateUrl: 'usagebymonth/usageByMonth.tpl.html',\r\n\t\tcontroller: 'UsageByMonthController',\r\n\t\tcontrollerAs: 'usageByMonthCtrl'\r\n\t});\r\n})\r\n.directive('monthForm', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\ttemplate: [\r\n\t\t\t\t'<form class=\"form-inline\">',\r\n\t\t\t\t\t'<div class=\"form-group\">',\r\n\t\t\t\t\t\t'<select-year ng-model=\"usageByMonthCtrl.selected.year\" class=\"form-control\" name=\"year\"/>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t'</form>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('monthTable', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\ttemplate: [\r\n\t\t\t\t'<div class=\"table-responsive\">',\r\n\t\t\t\t\t'<table class=\"table table-striped table-hover table-condensed\">',\r\n\t\t\t\t\t\t'<thead><tr month-header></tr></thead>',\r\n\t\t\t\t\t\t'<tbody><tr month-body ng-repeat=\"current in usageByMonthCtrl.data | orderBy:predicate:usageByMonthCtrl.reverse\"></tr></tbody>',\r\n\t\t\t\t\t\t'<tfoot><tr month-footer></tr></tfoot>',\r\n\t\t\t\t\t'</table>',\r\n\t\t\t\t'</div>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('monthHeader', function() {\r\n\treturn {\r\n\t\ttemplate: [\r\n\t\t\t\t'<th><a href=\"\" ng-click=\"predicate=\\'id\\'; usageByMonthCtrl.reverse=!usageByMonthCtrl.reverse;\">Month</a></th>',\r\n\t\t\t\t'<th class=\"text-right\">Down</th>',\r\n\t\t\t\t'<th class=\"text-right\">Up</th>',\r\n\t\t\t\t'<th class=\"text-right\"><a href=\"\" ng-click=\"predicate=\\'total\\'; usageByMonthCtrl.reverse=!usageByMonthCtrl.reverse\">Total</a></th>',\r\n\t\t\t\t'<th class=\"text-right\">Percent</th>',\r\n\t\t\t\t'<th class=\"text-right\">Average</th>',\r\n\t\t\t\t'<th class=\"text-right\">Days</th>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('monthBody', function() {\r\n\treturn {\r\n\t\ttemplate: [\r\n\t\t\t\t'<td>{{::current.id | toMonth}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.download | usageInGBytes | number:3}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.upload | usageInGBytes | number:3}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.total | usageInGBytes | number:3}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.percent | number:1}}%</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.average | usageInGBytes | number:3}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.days}}</td>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('monthFooter', function() {\r\n\treturn {\r\n\t\ttemplate: [\r\n\t\t\t\t'<th>{{usageByMonthCtrl.selected.year}} Totals</th>',\r\n\t\t\t\t'<th class=\"text-right\">{{::usageByMonthCtrl.total.download | usageInGBytes | number:3}}</th>',\r\n\t\t\t\t'<th class=\"text-right\">{{::usageByMonthCtrl.total.upload | usageInGBytes | number:3}}</th>',\r\n\t\t\t\t'<th class=\"text-right\">{{::usageByMonthCtrl.total.total | usageInGBytes | number:3}}</th>',\r\n\t\t\t\t'<th></th>',\r\n\t\t\t\t'<th class=\"text-right\">{{::usageByMonthCtrl.total.average | usageInGBytes | number:3}}</th>',\r\n\t\t\t\t'<th class=\"text-right\">{{::usageByMonthCtrl.total.days}}</th>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('monthChartForm', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\ttemplate: [\r\n\t\t\t\t'<form class=\"form-inline\">',\r\n\t\t\t\t\t'<div class=\"form-group\">',\r\n\t\t\t\t\t\t'<select-year ng-model=\"usageByMonthCtrl.selected.year\" class=\"form-control\" name=\"year\"/>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t\t'<div class=\"form-group\">',\r\n\t\t\t\t\t\t'<chart-type ng-model=\"usageByMonthCtrl.selected.chartType\" class=\"form-control\" name=\"chartType\"/>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t'</form>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('monthChart', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\ttemplate: [\r\n\t\t\t\t'<div>',\r\n\t\t\t\t\t'<linechart id=\"chartData\" data=\"usageByMonthCtrl.chartData\" options=\"usageByMonthCtrl.chartOptions\"></linechart>',\r\n\t\t\t\t'</div>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.controller('UsageByMonthController', function($scope, dataService, chartService) {\r\n\tvar usageByMonthCtrl = this;\r\n\r\n\tusageByMonthCtrl.selected = {};\r\n\tusageByMonthCtrl.predicate = 'id';\r\n\tusageByMonthCtrl.reverse = false;\r\n\r\n\t$scope.$watch('usageByMonthCtrl.selected.year', function() {\r\n\t\tvar usageData = dataService.getUsageByMonth(usageByMonthCtrl.selected.year);\r\n\r\n\t\tusageByMonthCtrl.data = usageData.data.usage;\r\n\t\tusageByMonthCtrl.total = usageData.data.total;\r\n\t\tusageByMonthCtrl.chartData = usageData.chartData;\r\n\t\tusageByMonthCtrl.chartOptions = chartService.getChartOptions(usageByMonthCtrl.chartData, chartService.getMonthLabel, chartService.getMonthLabel);\r\n\t}, true);\r\n\r\n\t$scope.$watch('usageByMonthCtrl.selected.chartType', function() {\r\n\t\tusageByMonthCtrl.chartOptions.series[0].type = usageByMonthCtrl.selected.chartType;\r\n\t}, true);\r\n\r\n});\r\n;/*\r\n *    Copyright (C) 2010 - 2015 VREM Software Development <VREMSoftwareDevelopment@gmail.com>\r\n *\r\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n *    you may not use this file except in compliance with the License.\r\n *    You may obtain a copy of the License at\r\n *\r\n *        http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *    Unless required by applicable law or agreed to in writing, software\r\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *    See the License for the specific language governing permissions and\r\n *    limitations under the License.\r\n */\r\nangular.module('BWMonApp.UsageByUser', ['ngRoute'])\r\n.config(function($routeProvider) {\r\n\t$routeProvider.when('/UsageByUser', {\r\n\t\ttemplateUrl: 'usagebyuser/usageByUser.tpl.html',\r\n\t\tcontroller: 'UsageByUserController',\r\n\t\tcontrollerAs: 'usageByUserCtrl'\r\n\t});\r\n})\r\n.directive('userForm', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\ttemplate: [\r\n\t\t\t\t'<form class=\"form-inline\">',\r\n\t\t\t\t\t'<div class=\"form-group\">',\r\n\t\t\t\t\t\t'<select-year ng-model=\"usageByUserCtrl.selected.year\" class=\"form-control\" name=\"year\"/>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t\t'<div class=\"form-group\">',\r\n\t\t\t\t\t\t'<select-month ng-model=\"usageByUserCtrl.selected.month\" year=\"usageByUserCtrl.selected.year\" class=\"form-control\" name=\"month\"/>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t\t'<div class=\"form-group\">',\r\n\t\t\t\t\t\t'<input ng-model=\"usageByUserCtrl.selected.user\" class=\"form-control\" name=\"user\" placeholder=\"IP, MAC or User\"/>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t\t'<div class=\"form-group\">',\r\n\t\t\t\t\t\t'<dir-pagination-controls max-size=\"5\" boundary-links=\"true\"></dir-pagination-controls>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t'</form>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('userTable', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\ttemplate: [\r\n\t\t\t\t'<div class=\"table-responsive\">',\r\n\t\t\t\t\t'<table class=\"table table-striped table-hover table-condensed\">',\r\n\t\t\t\t\t\t'<thead><tr user-header></tr></thead>',\r\n\t\t\t\t\t\t'<tbody><tr user-body dir-paginate=\"current in usageByUserCtrl.data | orderBy:predicate:usageByUserCtrl.reverse | itemsPerPage:usageByUserCtrl.pageSize\"></tr></tbody>',\r\n\t\t\t\t\t\t'<tfoot><tr user-footer></tr></tfoot>',\r\n\t\t\t\t\t'</table>',\r\n\t\t\t\t'</div>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('userHeader', function() {\r\n\treturn {\r\n\t\ttemplate: [\r\n\t\t\t\t'<th><a href=\"\" ng-click=\"predicate=\\'IP\\'; usageByUserCtrl.reverse=!usageByUserCtrl.reverse\">IP</a></th>',\r\n\t\t\t\t'<th><a href=\"\" ng-click=\"predicate=\\'MAC\\'; usageByUserCtrl.reverse=!usageByUserCtrl.reverse\">MAC</a></th>',\r\n\t\t\t\t'<th><a href=\"\" ng-click=\"predicate=\\'user\\'; usageByUserCtrl.reverse=!usageByUserCtrl.reverse\">User</a></th>',\r\n\t\t\t\t'<th class=\"text-right\">Down</th>',\r\n\t\t\t\t'<th class=\"text-right\">Up</th>',\r\n\t\t\t\t'<th class=\"text-right\"><a href=\"\" ng-click=\"predicate=\\'total\\'; usageByUserCtrl.reverse=!usageByUserCtrl.reverse\">Total</a></th>',\r\n\t\t\t\t'<th class=\"text-right\">Percent</th>',\r\n\t\t\t\t'<th class=\"text-right\">Average</th>',\r\n\t\t\t\t'<th class=\"text-right\">Days</th>',\r\n\t\t\t\t'<th>First Seen</th>',\r\n\t\t\t\t'<th>Last Seen</th>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('userBody', function() {\r\n\treturn {\r\n\t\ttemplate: [\r\n\t\t\t\t'<td>{{::current.IP}}</td>',\r\n\t\t\t\t'<td>{{::current.MAC}}</td>',\r\n\t\t\t\t'<td>{{::current.user}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.download | usageInGBytes | number:3}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.upload | usageInGBytes | number:3}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.total | usageInGBytes | number:3}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.percent | number:1}}%</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.average | usageInGBytes | number:3}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.days}}</td>',\r\n\t\t\t\t'<td>{{::current.firstSeen | timeToDate | date: \\'medium\\'}}</td>',\r\n\t\t\t\t'<td>{{::current.lastSeen | timeToDate | date: \\'medium\\'}}</td>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('userFooter', function() {\r\n\treturn {\r\n\t\ttemplate: [\r\n\t\t\t\t'<th colspan=\"3\">{{::usageByUserCtrl.selected.month}} {{::usageByUserCtrl.selected.year}} Totals</th>',\r\n\t\t\t\t'<th class=\"text-right\">{{::usageByUserCtrl.total.download | usageInGBytes | number:3}}</th>',\r\n\t\t\t\t'<th class=\"text-right\">{{::usageByUserCtrl.total.upload | usageInGBytes | number:3}}</th>',\r\n\t\t\t\t'<th class=\"text-right\">{{::usageByUserCtrl.total.total | usageInGBytes | number:3}}</th>',\r\n\t\t\t\t'<th></th>',\r\n\t\t\t\t'<th class=\"text-right\">{{::usageByUserCtrl.total.average | usageInGBytes | number:3}}</th>',\r\n\t\t\t\t'<th class=\"text-right\">{{::usageByUserCtrl.total.days}}</th>',\r\n\t\t\t\t'<th></th>',\r\n\t\t\t\t'<th></th>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('userChartForm', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\ttemplate: [\r\n\t\t\t\t'<form class=\"form-inline\">',\r\n\t\t\t\t\t'<div class=\"form-group\">',\r\n\t\t\t\t\t\t'<select-year ng-model=\"usageByUserCtrl.selected.year\" class=\"form-control\" name=\"year\"/>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t\t'<div class=\"form-group\">',\r\n\t\t\t\t\t\t'<select-month ng-model=\"usageByUserCtrl.selected.month\" year=\"usageByUserCtrl.selected.year\" class=\"form-control\" name=\"month\"/>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t\t'<div class=\"form-group\">',\r\n\t\t\t\t\t\t'<input ng-model=\"usageByUserCtrl.selected.user\" class=\"form-control\" name=\"user\" placeholder=\"IP, MAC or User\"/>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t\t'<div class=\"form-group\">',\r\n\t\t\t\t\t\t'<chart-type ng-model=\"usageByUserCtrl.selected.chartType\" class=\"form-control\" name=\"chartType\"/>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t'</form>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('userChart', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\ttemplate: [\r\n\t\t\t\t'<div>',\r\n\t\t\t\t\t'<linechart id=\"chartData\" data=\"usageByUserCtrl.chartData\" options=\"usageByUserCtrl.chartOptions\"></linechart>',\r\n\t\t\t\t'</div>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.controller('UsageByUserController', function($scope, dataService, chartService) {\r\n\tvar usageByUserCtrl = this,\r\n\t\treset = function() {\r\n\t\t\tusageByUserCtrl.selected.user = '';\r\n\t\t};\r\n\r\n\tusageByUserCtrl.selected = {};\r\n\tusageByUserCtrl.predicate = 'IP';\r\n\tusageByUserCtrl.reverse = false;\r\n\tusageByUserCtrl.pageSize = 12;\r\n\r\n\t$scope.$watch('usageByUserCtrl.selected.year', function() {\r\n\t\treset();\r\n\t\tusageByUserCtrl.selected.month = dataService.getMonths(usageByUserCtrl.selected.year)[0];\r\n\t}, true);\r\n\r\n\t$scope.$watch('usageByUserCtrl.selected.month', function() {\r\n\t\treset();\r\n\t}, true);\r\n\r\n\t$scope.$watch('usageByUserCtrl.selected', function() {\r\n\t\tvar usageData = dataService.getUsageByUser(usageByUserCtrl.selected.year, usageByUserCtrl.selected.month, usageByUserCtrl.selected.user);\r\n\t\tusageByUserCtrl.data = usageData.data.usage;\r\n\t\tusageByUserCtrl.total = usageData.data.total;\r\n\t\tusageByUserCtrl.chartData = usageData.chartData;\r\n\t\tusageByUserCtrl.chartOptions = chartService.getChartOptions(usageByUserCtrl.chartData, chartService.getUserLabel, chartService.getUserTooltip);\r\n\t}, true);\r\n\r\n\t$scope.$watch('usageByUserCtrl.selected.chartType', function() {\r\n\t\tusageByUserCtrl.chartOptions.series[0].type = usageByUserCtrl.selected.chartType;\r\n\t}, true);\r\n});\r\n;/*\r\n *    Copyright (C) 2010 - 2015 VREM Software Development <VREMSoftwareDevelopment@gmail.com>\r\n *\r\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n *    you may not use this file except in compliance with the License.\r\n *    You may obtain a copy of the License at\r\n *\r\n *        http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *    Unless required by applicable law or agreed to in writing, software\r\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *    See the License for the specific language governing permissions and\r\n *    limitations under the License.\r\n */\r\nangular.module('BWMonApp.UsageByYear', ['ngRoute'])\r\n.config(function($routeProvider) {\r\n\t$routeProvider.when('/UsageByYear', {\r\n\t\ttemplateUrl: 'usagebyyear/usageByYear.tpl.html',\r\n\t\tcontroller: 'UsageByYearController',\r\n\t\tcontrollerAs: 'usageByYearCtrl'\r\n\t});\r\n})\r\n.directive('yearTable', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\ttemplate: [\r\n\t\t\t\t'<div class=\"table-responsive\">',\r\n\t\t\t\t\t'<table class=\"table table-striped table-hover table-condensed\">',\r\n\t\t\t\t\t\t'<thead><tr year-header></tr></thead>',\r\n\t\t\t\t\t\t'<tbody><tr year-body ng-repeat=\"current in usageByYearCtrl.data | orderBy:predicate:usageByYearCtrl.reverse\"></tr></tbody>',\r\n\t\t\t\t\t'</table>',\r\n\t\t\t\t'</div>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('yearHeader', function() {\r\n\treturn {\r\n\t\ttemplate: [\r\n\t\t\t\t'<th><a href=\"\" ng-click=\"predicate=\\'id\\'; usageByYearCtrl.reverse=!usageByYearCtrl.reverse;\">Year</a></th>',\r\n\t\t\t\t'<th class=\"text-right\">Down</th>',\r\n\t\t\t\t'<th class=\"text-right\">Up</th>',\r\n\t\t\t\t'<th class=\"text-right\"><a href=\"\" ng-click=\"predicate=\\'total\\'; usageByYearCtrl.reverse=!usageByYearCtrl.reverse\">Total</a></th>',\r\n\t\t\t\t'<th class=\"text-right\">Average</th>',\r\n\t\t\t\t'<th class=\"text-right\">Days</th>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('yearBody', function() {\r\n\treturn {\r\n\t\ttemplate: [\r\n\t\t\t\t'<td>{{current.id}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.download | usageInGBytes | number:3}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.upload | usageInGBytes | number:3}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.total | usageInGBytes | number:3}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.average | usageInGBytes | number:3}}</td>',\r\n\t\t\t\t'<td class=\"text-right\">{{::current.days}}</td>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('yearChartForm', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\ttemplate: [\r\n\t\t\t\t'<form class=\"form-inline\">',\r\n\t\t\t\t\t'<div class=\"form-group\">',\r\n\t\t\t\t\t\t'<chart-type ng-model=\"usageByYearCtrl.selected.chartType\" class=\"form-control\" name=\"chartType\"/>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t'</form>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.directive('yearChart', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\ttemplate: [\r\n\t\t\t\t'<div>',\r\n\t\t\t\t\t'<linechart id=\"chartData\" data=\"usageByYearCtrl.chartData\" options=\"usageByYearCtrl.chartOptions\"></linechart>',\r\n\t\t\t\t'</div>'\r\n\t\t\t].join('')\r\n\t};\r\n})\r\n.controller('UsageByYearController', function($scope, dataService, chartService) {\r\n\tvar usageByYearCtrl = this;\r\n\tvar usageData = dataService.getUsageByYear();\r\n\r\n\tusageByYearCtrl.selected = {};\r\n\tusageByYearCtrl.predicate = 'id';\r\n\tusageByYearCtrl.reverse = false;\r\n\tusageByYearCtrl.data = usageData.data;\r\n\tusageByYearCtrl.chartData = usageData.chartData;\r\n\tusageByYearCtrl.chartOptions = chartService.getChartOptions(usageByYearCtrl.chartData, chartService.getYearLabel, chartService.getYearLabel);\r\n\r\n\t$scope.$watch('usageByYearCtrl.selected.chartType', function() {\r\n\t\tusageByYearCtrl.chartOptions.series[0].type = usageByYearCtrl.selected.chartType;\r\n\t}, true);\r\n\r\n});\r\n"],"sourceRoot":"/source/"}